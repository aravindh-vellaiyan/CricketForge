<html>
<head>
    <title>All Matches</title>
    <link rel="stylesheet" href="styles.css">
    <script src="app.js"></script>
</head>

<body onload="loadMatches()">

<div class="header">
    <div class="title">CricForge</div>
    <button class="logout-btn" onclick="logout()">Logout</button>
</div>

<div class="container">
    <h2>All Matches</h2>

    <div class="error" id="error"></div>
    <div id="matchList"></div>
</div>

<script>
    async function loadMatches() {
        try {
            const matches = await api('/matches', 'GET');  // You must create this endpoint

            matchList.innerHTML = matches.map(m => `
                <div class="card">
                    <h3>${m.teamA.name} vs ${m.teamB.name}</h3>
                    <p>Status: ${m.status}</p>
                    <button onclick="window.location='scoreboard.html?matchId=${m.matchId}'">
                        View Scoreboard
                    </button>
                </div>
            `).join('');

        } catch (err) {
            showError(err.message);
        }
    }
</script>

</body>
</html>